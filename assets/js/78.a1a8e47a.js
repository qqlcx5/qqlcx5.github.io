(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{462:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vue3-beta-开发知乎日报"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-beta-开发知乎日报"}},[t._v("#")]),t._v(" Vue3 beta 开发知乎日报")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qqlcx5/figure-bed@1.0/img/20200723154936.jpg",alt:"vue"}})]),t._v(" "),s("h2",{attrs:{id:"项目界面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目界面"}},[t._v("#")]),t._v(" 项目界面")]),t._v(" "),s("p",[t._v("一个简单的小项目，基于"),s("code",[t._v("Vue3.0")]),t._v(" + "),s("code",[t._v("axios")]),t._v(" + "),s("code",[t._v("swiper")]),t._v("实现。让大家对 Vue3.0 API 有一些新的认识。")]),t._v(" "),s("p",[s("img",{attrs:{src:"media/15953813415643/zhihu.gif",alt:"zhihu"}})]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("Vue3.0 个人觉得学习挺容易的，Vue2.0 水平怎么样，Vue3.0 也就差不多那样，所以 Vue2.0 学的不太好的同学还是回去补一补，现阶段急于学习 Vue3.0 反而容易造成知识混淆。很多写法和 Vue2.0 相似，学习成本不高，但是很多底层东西进行的重构，所以目前不建议直接使用在公司项目上。")]),t._v(" "),s("h2",{attrs:{id:"个人建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#个人建议"}},[t._v("#")]),t._v(" 个人建议")]),t._v(" "),s("p",[t._v("目前 Vue3.0 开发版接近尾声，预计下个月就上线稳定版，存在以下问题，不建议在公司项目直接使用，估计还的等一段时间吧。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('"vue-router": "^4.0.0-alpha.6"')]),t._v(" 还在开发中。这个阶段还未定型，今天解决的 BUG 可能明天就是另外的 Bug。")]),t._v(" "),s("li",[t._v("第三方库还未兼容到 Vue3.0 意想不到的兼容性等问题。")]),t._v(" "),s("li",[t._v("Vue3.0 API 部分功能还未完善，Vue2.0 和 Vue3.0 去实现。")]),t._v(" "),s("li",[t._v("遇到技术难点，需要花大把时间去琢磨。一些问题涉及基础的东西，底子不牢，也能难查出问题所在。")])]),t._v(" "),s("p",[t._v("综上所述，用在公司项目上，估计得折腾得够呛，或者未能按时间开发完成，产品问题多还会被扣奖金绩效等，吃力不讨好。")]),t._v(" "),s("p",[t._v("但是做为先行者去学习和开发项目，收益颇丰，更加能体会 Vue 开发者如何去架构和设计思想所在。")]),t._v(" "),s("h2",{attrs:{id:"项目实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目实战"}},[t._v("#")]),t._v(" 项目实战")]),t._v(" "),s("p",[t._v("Vue 3.0 在兼容 2.x 基础上做改进。且能使用 Vue 3.0 新特性。")]),t._v(" "),s("h3",{attrs:{id:"初始化项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目"}},[t._v("#")]),t._v(" 初始化项目")]),t._v(" "),s("p",[t._v("1、安装 vue-cli3")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install -g @vue/cli\n")])])]),s("p",[t._v("2、创建项目")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("vue create zhihu\n\nVue "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CLI")]),t._v(" v4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.6")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" Please pick a preset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eslint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Manually select features\n\nbabel：javascript转译器，将最新版的js语法（es6、es7）转换为现阶段浏览器可以兼容的js代码\ntypescript：使用 TypeScript 书写源码\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PWA")]),t._v("：渐进式"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WEB")]),t._v("应用\nRouter：使用vue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("router\nVuex：使用vuex\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CSS")]),t._v(" Pre"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("processors：css预处理器\nLinter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" Formatter：代码规范标准\nUnit Testing：单元测试\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E2E")]),t._v(" Testing：e2e测试\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" Please pick a preset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Manually select features\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" Check the features needed "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" your project"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Babel")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("TypeScript")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Progressive Web "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PWA")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Support")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Router")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Vuex\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CSS")]),t._v(" Pre"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processors")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Linter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Formatter")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Unit "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Testing")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E2E")]),t._v(" Testing\n")])])]),s("p",[t._v("3、Vue 版本升级")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vue add vue-next\n// 将Vue 2.6.x版本升级到\n")])])]),s("p",[t._v("查看项目"),s("code",[t._v("package.json")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('  "dependencies": {\n     "vue": "^3.0.0-beta.1",\n     "vue-router": "^4.0.0-alpha.6"\n    },\n    "devDependencies": {\n    "@vue/cli-plugin-babel": "~4.4.0",\n    "@vue/cli-plugin-eslint": "~4.4.0",\n    "@vue/cli-plugin-router": "~4.4.0",\n    "@vue/cli-service": "~4.4.0",\n    "@vue/compiler-sfc": "^3.0.0-beta.1",\n    "@vue/eslint-config-prettier": "^6.0.0",\n    "babel-eslint": "^10.1.0",\n    "eslint": "^6.7.2",\n    "eslint-plugin-prettier": "^3.1.3",\n    "eslint-plugin-vue": "^7.0.0-alpha.0",\n    "less": "^3.0.4",\n    "less-loader": "^5.0.0",\n    "prettier": "^1.19.1",\n    "vue-cli-plugin-vue-next": "~0.1.3"\n  },\n')])])]),s("p",[s("code",[t._v("vue-router")]),t._v(" 还在开发中，"),s("code",[t._v("vue-cli-plugin-vue-next")]),t._v(" 用来处理 Vue3.0 编译相关语法。")]),t._v(" "),s("h3",{attrs:{id:"静态页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#静态页面"}},[t._v("#")]),t._v(" 静态页面")]),t._v(" "),s("p",[t._v("项目布局，静态页面，略过")]),t._v(" "),s("h3",{attrs:{id:"项目结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目结构"}},[t._v("#")]),t._v(" 项目结构")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".\n├── src\n│   ├── api\n│   ├── assets\n│   ├── components\n│   ├── router\n│   ├── utils\n│   ├── views\n│   ├── App.vue\n│   └── main.js\n├── public\n├── vue.config.js\n└── package.json\n")])])]),s("ul",[s("li",[s("code",[t._v("src/api")]),t._v(": 用于存放接口和管理。")]),t._v(" "),s("li",[s("code",[t._v("src/assets")]),t._v(": 静态资源目录。")]),t._v(" "),s("li",[s("code",[t._v("src/components")]),t._v(": 用于存放全局组件。")]),t._v(" "),s("li",[s("code",[t._v("src/router")]),t._v(": 用于存放路由相关的文件。")]),t._v(" "),s("li",[s("code",[t._v("src/utils")]),t._v(": 用于存放工具类相关的文件")]),t._v(" "),s("li",[s("code",[t._v("src/views")]),t._v(": 用于存放视图相关组件。")])]),t._v(" "),s("h3",{attrs:{id:"项目-vue3-0-api-知识点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目-vue3-0-api-知识点"}},[t._v("#")]),t._v(" 项目 Vue3.0 API 知识点")]),t._v(" "),s("h4",{attrs:{id:"setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[t._v("#")]),t._v(" setup")]),t._v(" "),s("p",[s("code",[t._v("setup")]),t._v(" 函数是一个新的组件选项。作为在组件内使用 Composition API 的入口点。")]),t._v(" "),s("p",[s("strong",[t._v("生命周期")])]),t._v(" "),s("p",[t._v("创建组件实例，然后初始化 props ，紧接着就调用 setup 函数。从生命周期钩子的视角来看，它会在 beforeCreate 钩子之前被调用。")]),t._v(" "),s("p",[t._v("注意事项：")]),t._v(" "),s("p",[s("code",[t._v("this")]),t._v(" 不能使用，了解 Vue2.0 的同学应该知道，在这生命周期之间。"),s("code",[t._v("data()")]),t._v("数据还未生成，所以 "),s("code",[t._v("this.xx")]),t._v("不能调用的。")]),t._v(" "),s("h4",{attrs:{id:"响应式数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#响应式数据"}},[t._v("#")]),t._v(" 响应式数据")]),t._v(" "),s("p",[t._v("Vue2.0 存放在"),s("code",[t._v("data() {return {} }")]),t._v(" 就可以直接调用，而 Vue3.0 则需要通过"),s("code",[t._v("ref")]),t._v("或者"),s("code",[t._v("reactive")]),t._v(" 来声明响应式数据。")]),t._v(" "),s("p",[s("strong",[t._v("ref")])]),t._v(" "),s("p",[t._v("接受一个参数值并返回一个响应式且可改变的 ref 对象。ref 对象拥有一个指向内部值的单一属性 .value。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const count = ref(0)\nconsole.log(count.value) // 0\n\ncount.value++\nconsole.log(count.value) // 1\n")])])]),s("p",[t._v("如果传入 ref 的是一个对象，将调用 reactive 方法进行深层响应转换。")]),t._v(" "),s("p",[s("strong",[t._v("reactive")])]),t._v(" "),s("p",[t._v("接收一个普通对象然后返回该普通对象的响应式代理。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const obj = reactive({ count: 0 })\n")])])]),s("h4",{attrs:{id:"计算属性-computed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#计算属性-computed"}},[t._v("#")]),t._v(" 计算属性 "),s("code",[t._v("computed")])]),t._v(" "),s("p",[s("code",[t._v("computed")]),t._v(" 传入一个 getter 函数，返回一个默认不可手动修改的 ref 对象。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const count = ref(1)\nconst plusOne = computed(() => count.value + 1)\n\nconsole.log(plusOne.value) // 2\n")])])]),s("h4",{attrs:{id:"watch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#watch"}},[t._v("#")]),t._v(" watch")]),t._v(" "),s("p",[t._v("watch 需要侦听特定的数据源，并在回调函数中执行副作用。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const count = ref(0)\nwatch(count, (count, prevCount) => {\n  /* ... */\n})\n")])])]),s("p",[t._v("以上教程皆来自 "),s("a",{attrs:{href:"https://composition-api.vuejs.org/zh/api.html#setup",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 组合式 API"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实战"}},[t._v("#")]),t._v(" 实战")]),t._v(" "),s("p",[t._v("项目如果太抠细节的去讲，不知道从何说起，以下主要分为几个功能阐述这个项目。想了解项目更多细节，可以克隆我的项目，运行调试。")]),t._v(" "),s("h3",{attrs:{id:"时间处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#时间处理"}},[t._v("#")]),t._v(" 时间处理")]),t._v(" "),s("p",[s("code",[t._v("src/utils/index.js")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("function formatTime(time) {\n  let arr = [];\n  time = time.toLocaleDateString();\n  time.replace(/\\d+/g, (val) => {\n    val = val < 2 ? `0${val}` : val;\n    arr.push(val);\n  });\n  return arr;\n}\nfunction convertTime(time) {\n  time = time.replace(/^(\\d{4})(\\d{2})(\\d{2})$/g,(_,g1,g2,g3)=>{\n    return `${g1}/${g2}/${g3}`\n  })\n  return new Date(time);\n}\n\nexport default {\n  formatTime,\n  convertTime,\n};\n")])])]),s("p",[s("code",[t._v("formatTime()")]),t._v("中的参数"),s("code",[t._v("time")]),t._v("为"),s("code",[t._v("new Date()")]),t._v("的标准日期格式，然后通过"),s("code",[t._v("toLocaleDateString()")]),t._v("转成"),s("code",[t._v("2020/7/21")]),t._v("，在依次添加到数组里面。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("在不同环境下，输出不同结果。`toLocaleDateString`\n // 浏览器\n[\"2020\", \"7\", \"21\"]\n\n// [Running] node\n[ '7', '21', '2020']\n")])])]),s("p",[s("code",[t._v("convertTime")]),t._v("方法：将格式"),s("code",[t._v("20200721")]),t._v("转成"),s("code",[t._v("2020/07/21")]),t._v("的正则表达式。")]),t._v(" "),s("p",[s("strong",[t._v("应用")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('import utils from "../utils";\n\nconst state = reactive({\n  date: new Date(),\n  bannerData: [],\n  newsData: []\n});\n\nlet day = computed(() => utils.formatTime(state.date)[2]);\nlet month = computed(() => utils.formatTime(state.date)[1]);\n\nreturn {\n day,\n month\n};\n')])])]),s("p",[t._v("通过计算属性，计算出几月份和几日。写法不像 Vue2.0 直接包裹在"),s("code",[t._v("computed")]),t._v("里面。")]),t._v(" "),s("h3",{attrs:{id:"请求接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求接口"}},[t._v("#")]),t._v(" 请求接口")]),t._v(" "),s("p",[s("code",[t._v("src/api/")]),t._v("目录下的"),s("code",[t._v("axios.js")]),t._v(" 对"),s("code",[t._v("axios")]),t._v("进行二次封装，"),s("code",[t._v("zhihu.js")]),t._v("相关的知乎日报接口。\n"),s("code",[t._v("index.js")]),t._v("对多个接口进行整合。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// zhihu.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" axios "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./axios'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_LATEST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/news/latest'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_DETAIL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("/news/")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_LATEST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_DETAIL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zhihu "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./zhihu'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" zhihu "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("应用")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../api"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bannerData")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("newsData")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在渲染组件前，异步加载数据")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onBeforeMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stories"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top_stories "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zhihu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_LATEST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("date "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convertTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newsData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("date")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        stories\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bannerData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" top_stories"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRefs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"初始化轮播图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化轮播图"}},[t._v("#")]),t._v(" 初始化轮播图")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" watch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initSwiper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Swiper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".swiper-container"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loop")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pagination")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("el")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".swiper-pagination"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bannerData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initSwiper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("注意点：当获取轮播图的数据赋值到"),s("code",[t._v("state")]),t._v("上，此时数据还未渲染到组件上。")]),t._v(" "),s("p",[t._v("解决方法：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Vue2.0")]),t._v("调用 Vue.nextTick API（在下次 DOM 更新循环结束之后执行延迟回调。）去执行初始化。")]),t._v(" "),s("li",[s("code",[t._v("Vue3.0")]),t._v(" 通过"),s("code",[t._v("watch")]),t._v(" 去监听数据改变，在执行初始化。")])]),t._v(" "),s("h3",{attrs:{id:"详情页的功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#详情页的功能"}},[t._v("#")]),t._v(" 详情页的功能")]),t._v(" "),s("p",[t._v("点击列表详情页时候，需要携带一个文章的 ID 过去，去请求详情接口获取更多内容。\n如果我上面说的"),s("code",[t._v("setup()")]),t._v("方法有印象的话，在"),s("code",[t._v("setup()")]),t._v("中不能调用"),s("code",[t._v("this")]),t._v("。\n习惯了"),s("code",[t._v("Vue2.0")]),t._v("跳转方式"),s("code",[t._v("this.$router.push({name: 'detail',params:{id: xx}})")]),t._v("\nVue3.0 突然不知如何下手，好在 Vue2.0 还提供组件式跳转。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<router-link :to="{path:`/detail/${item.id}`}" </router-link>\n')])])]),s("p",[s("strong",[t._v("获取路由的参数")])]),t._v(" "),s("p",[t._v("Vue3.0 路由还在开发中，暂时还未能获取路由的参数 API，只能先用 Vue2.0 写法先代替了。")]),t._v(" "),s("p",[t._v("难点：如何在 Vue2.0 中修改 Vue3.0 的值，且还能被"),s("code",[t._v("watch")]),t._v("监听到。")]),t._v(" "),s("p",[t._v("解决方法：")]),t._v(" "),s("p",[t._v("直接用 Vue2.0 中实现功能。（嗯，我这是 Vue3.0 教程当然得用 Vue3.0 去实现咯）")]),t._v(" "),s("p",[t._v("我在 Vue3.0 中，我先声明了响应式数据，通过 Vue2.0 获取路由参数后，尝试"),s("code",[t._v("this.id = xx")]),t._v(" 打印下"),s("code",[t._v("log")]),t._v("，输出 this 对象如下，功能实现了。")]),t._v(" "),s("p",[s("img",{attrs:{src:"media/15953813415643/15954883956535.jpg",alt:"-w388"}})]),t._v(" "),s("p",[t._v("然而"),s("code",[t._v("reactive")]),t._v("的方式去声明响应式数据，其他不变，发现并能查到"),s("code",[t._v("id")]),t._v("。深入之后了解到"),s("code",[t._v("ref")]),t._v("和 Vue2.0 的"),s("code",[t._v("data( return {} )")]),t._v("底层原理都是基于"),s("code",[t._v("Object.definedproperty")]),t._v("实现，所以可以通过 this 去修改。"),s("code",[t._v("reactive")]),t._v("则式"),s("code",[t._v("Prxoy")]),t._v("实现的。还有 ref 中包裹是个对象话，也会通过"),s("code",[t._v("Prxoy")]),t._v("实现。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" watch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toRefs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../api'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("title")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("section")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" section "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zhihu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_DETAIL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" image\n            state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" body\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("section "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" section "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" section"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'佚名'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRefs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" id\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"完整的项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整的项目"}},[t._v("#")]),t._v(" 完整的项目")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/qqlcx5/zhihu",target:"_blank",rel:"noopener noreferrer"}},[t._v("知乎日报"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("Vue3.0 实现知乎日报个人感觉还是不错，新写法或多或少有些不习惯，比如有个"),s("code",[t._v("toRef")]),t._v("少写 s，调试了半天也没报错，好在后面注意到了。多写几次后就会习惯，对比 Vue3.0 的各方面提升，一些写法的变化，无可厚非。所以还是尽快去熟悉 Vue3.0 的知识，等 UI 库等兼容 Vue3.0 版本上线就正式使用了。相信这一天很快来临。")]),t._v(" "),s("p",[t._v("参考链接：")]),t._v(" "),s("ul",[s("li",[t._v("http://www.javascriptpeixun.cn/course/1435/task/117818/show")])])])}),[],!1,null,null,null);s.default=e.exports}}]);